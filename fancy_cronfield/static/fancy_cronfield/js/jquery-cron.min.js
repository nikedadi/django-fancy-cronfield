!function(t){for(var e={initial:"* * * * *",minuteOpts:{minWidth:100,itemWidth:30,columns:4,rows:void 0,title:gettext("Minutes Past the Hour")},timeHourOpts:{minWidth:100,itemWidth:20,columns:2,rows:void 0,title:gettext("Time: Hour")},domOpts:{minWidth:100,itemWidth:30,columns:void 0,rows:10,title:gettext("Day of Month")},monthOpts:{minWidth:100,itemWidth:100,columns:2,rows:void 0,title:void 0},dowOpts:{minWidth:100,itemWidth:void 0,columns:void 0,rows:void 0,title:void 0},timeMinuteOpts:{minWidth:100,itemWidth:20,columns:4,rows:void 0,title:gettext("Time: Minute")},effectOpts:{openSpeed:400,closeSpeed:400,openEffect:"slide",closeEffect:"slide",hideOnMouseOut:!0},url_set:void 0,allowMultiple_all:!1,allowMultiple_dom:!1,allowMultiple_month:!1,allowMultiple_dow:!1,allowMultiple_minute:!1,allowMultiple_hour:!1,customValues:void 0,onChange:void 0,useGentleSelect:!1},o="",l=0;l<60;l++)o+="<option value='"+l+"'>"+(l<10?"0":"")+l+"</option>\n";var n="";for(l=0;l<24;l++)n+="<option value='"+l+"'>"+(l<10?"0":"")+l+"</option>\n";var i="";for(l=1;l<32;l++){var a="";a=1===l||21===l||31===l?gettext("%(day)sst"):2===l||22===l?gettext("%(day)snd"):3===l||23===l?gettext("%(day)srd"):gettext("%(day)sth"),i+="<option value='"+l+"'>",i+=interpolate(a,{day:l},!0),i+="</option>\n"}var s="",r=[gettext("January"),gettext("February"),gettext("March"),gettext("April"),gettext("May"),gettext("June"),gettext("July"),gettext("August"),gettext("September"),gettext("October"),gettext("November"),gettext("December")];for(l=0;l<r.length;l++)s+="<option value='"+(l+1)+"'>",s+=r[l],s+="</option>\n";var c="",d=[gettext("Sunday"),gettext("Monday"),gettext("Tuesday"),gettext("Wednesday"),gettext("Thursday"),gettext("Friday"),gettext("Saturday")];for(l=0;l<d.length;l++)c+="<option value='"+l+"'>"+d[l]+"</option>\n";var u="",m={minute:gettext("minute"),hour:gettext("hour"),day:gettext("day"),week:gettext("week"),month:gettext("month"),year:gettext("year")};for(var p in m)u+="<option value='"+p+"'>",u+=m[p],u+="</option>\n";var h={minute:[],hour:["mins"],day:["time"],week:["dow","time"],month:["dom","time"],year:["dom","month","time"]},v={minute:/^(\*\s){4}\*$/,hour:/^\d{1,2}\s(\*\s){3}\*$/,day:/^(\d{1,2}\s){2}(\*\s){2}\*$/,week:/^(\d{1,2}\s){2}(\*\s){2}\d{1,2}$/,month:/^(\d{1,2}\s){3}\*\s\*$/,year:/^(\d{1,2}\s){4}\*$/};function f(t){return void 0!==t}function g(e,o){if(f(o.customValues))for(key in o.customValues)if(e===o.customValues[key])return key;if("string"==typeof e&&/^((\d{1,2}|\*)\s){4}(\d{1,2}|\*)$/.test(e)){for(var l=e.split(" "),n=[0,0,1,1,0],i=[59,23,31,12,6],a=[o.allowMultiple_all||o.allowMultiple_minute,o.allowMultiple_all||o.allowMultiple_hour,o.allowMultiple_all||o.allowMultiple_dom,o.allowMultiple_all||o.allowMultiple_month,o.allowMultiple_all||o.allowMultiple_dow],s=0;s<l.length;s++)if("*"!==l[s]){var r=parseInt(l[s],10);if(!(f(r)&&r<=i[s]&&r>=n[s]||a[s]||-1===l[s].indexOf(","))){var c="cron: invalid value found (col "+(s+1);return c+=") in "+o.initial,void t.error(c)}}for(var d in v)if(v[d].test(e))return d;t.error("cron: valid but unsupported cron format. sorry.")}else t.error("cron: invalid initial value")}function w(e,o){if(!f(g(o.initial,o)))return!0;if(f(l=o.customValues)&&"object"!=typeof l)return!0;var l;if(f(o.customValues))for(key in o.customValues)if(v.hasOwnProperty(key))return t.error("cron: reserved keyword '"+key+"' should not be used as customValues key."),!0;return!1}var x={init:function(l){var a=l||{},r=t.extend([],e,a),d=t.extend({},e.effectOpts,a.effectOpts);if(t.extend(r,{minuteOpts:t.extend({},e.minuteOpts,d,a.minuteOpts),domOpts:t.extend({},e.domOpts,d,a.domOpts),monthOpts:t.extend({},e.monthOpts,d,a.monthOpts),dowOpts:t.extend({},e.dowOpts,d,a.dowOpts),timeHourOpts:t.extend({},e.timeHourOpts,d,a.timeHourOpts),timeMinuteOpts:t.extend({},e.timeMinuteOpts,d,a.timeMinuteOpts)}),w(0,r))return this;var m=[],p="",h=r.customValues;if(f(h))for(var v in h)h.hasOwnProperty(v)&&(p+="<option value='"+h[v]+"'>"+v+"</option>\n");var g="<span class='cron-period'>"+gettext("Every");g+=" <select name='cron-period'>"+p,g+=u+"</select> </span>",m.period=t(g).appendTo(this).data("root",this);var O=m.period.find("select");O.bind("change.cron",y.periodChanged).data("root",this),r.useGentleSelect&&O.gentleSelect(d);var b="";(r.allowMultiple_all||r.allowMultiple_dom)&&(b=" multiple='multiple'"),g="<span class='cron-block cron-block-dom'>",g+=" "+gettext("on the")+" <select name='cron-dom'",g+=b+">"+i+"</select> </span>",m.dom=t(g).appendTo(this).data("root",this),O=m.dom.find("select").data("root",this),r.useGentleSelect&&O.gentleSelect(r.domOpts);var k="";(r.allowMultiple_all||r.allowMultiple_month)&&(k=" multiple='multiple'"),g="<span class='cron-block cron-block-month'>",g+=" "+gettext("of")+" <select name='cron-month'",g+=k+">"+s+"</select> </span>",m.month=t(g).appendTo(this).data("root",this),O=m.month.find("select").data("root",this),r.useGentleSelect&&O.gentleSelect(r.monthOpts);var M="";(r.allowMultiple_all||r.allowMultiple_minute)&&(M=" multiple='multiple'"),g="<span class='cron-block cron-block-mins'>",g+=" "+gettext("at")+" <select name='cron-mins'",g+=M+">"+o+"</select> ",g+=gettext("minutes past the hour")+" </span>",m.mins=t(g).appendTo(this).data("root",this),O=m.mins.find("select").data("root",this),r.useGentleSelect&&O.gentleSelect(r.minuteOpts);var _="";(r.allowMultiple_all||r.allowMultiple_dow)&&(_=" multiple='multiple'"),g="<span class='cron-block cron-block-dow'>",g+=" "+gettext("on")+" <select name='cron-dow'",g+=_+">"+c+"</select> </span>",m.dow=t(g).appendTo(this).data("root",this),O=m.dow.find("select").data("root",this),r.useGentleSelect&&O.gentleSelect(r.dowOpts);var S="";return(r.allowMultiple_all||r.allowMultiple_hour)&&(S=" multiple='multiple'"),g="<span class='cron-block cron-block-time'>",g+=" "+gettext("at"),g+=" <select name='cron-time-hour' class='cron-time-hour'",g+=S+">"+n,g+="</select>:<select name='cron-time-min'",g+="class='cron-time-min'"+M+">"+o,g+=" </span>",m.time=t(g).appendTo(this).data("root",this),O=m.time.find("select.cron-time-hour").data("root",this),r.useGentleSelect&&O.gentleSelect(r.timeHourOpts),O=m.time.find("select.cron-time-min").data("root",this),r.useGentleSelect&&O.gentleSelect(r.timeMinuteOpts),g="<span class='cron-controls'>&laquo; save ",g+="<span class='cron-button cron-button-save'></span>",g+=" </span>",m.controls=t(g).appendTo(this).data("root",this).find("span.cron-button-save").bind("click.cron",y.saveClicked).data("root",this).end(),this.find("select").bind("change.cron-callback",y.somethingChanged),this.data("options",r).data("block",m),this.data("current_value",r.initial),x.value.call(this,r.initial)},value:function(t){if(!t)return function(t){var e=t.data("block"),o="*",l="*",n="*",i="*",a="*",s=e.period.find("select").val();switch(s){case"minute":break;case"hour":o=e.mins.find("select").val();break;case"day":o=e.time.find("select.cron-time-min").val(),l=e.time.find("select.cron-time-hour").val();break;case"week":o=e.time.find("select.cron-time-min").val(),l=e.time.find("select.cron-time-hour").val(),a=e.dow.find("select").val();break;case"month":o=e.time.find("select.cron-time-min").val(),l=e.time.find("select.cron-time-hour").val(),n=e.dom.find("select").val();break;case"year":o=e.time.find("select.cron-time-min").val(),l=e.time.find("select.cron-time-hour").val(),n=e.dom.find("select").val(),i=e.month.find("select").val();break;default:return s}return[o,l,n,i,a].join(" ")}(this);var e=this.data("options"),o=this.data("block"),l=e.useGentleSelect,n=g(t,e);if(!f(n))return!1;if(f(e.customValues)&&e.customValues.hasOwnProperty(n))n=e.customValues[n];else for(var i=t.split(" "),a={mins:i[0],hour:i[1],dom:i[2],month:i[3],dow:i[4]},s=h[n],r=0;r<s.length;r++){var c,d=s[r];"time"===d?(c=o[d].find("select.cron-time-hour").val(a.hour),l&&c.gentleSelect("update"),c=o[d].find("select.cron-time-min").val(a.mins),l&&c.gentleSelect("update")):(c=o[d].find("select").val(a[d]),l&&c.gentleSelect("update"))}var u=o.period.find("select").val(n);return l&&u.gentleSelect("update"),u.trigger("change"),this}},y={periodChanged:function(){var e=t(this).data("root"),o=e.data("block"),l=t(this).val();if(e.find("span.cron-block").hide(),h.hasOwnProperty(l))for(var n=h[t(this).val()],i=0;i<n.length;i++)o[n[i]].show()},somethingChanged:function(){var e=t(this).data("root");f(e.data("options").url_set)?x.value.call(e)!==e.data("current_value")?(e.addClass("cron-changed"),e.data("block").controls.fadeIn()):(e.removeClass("cron-changed"),e.data("block").controls.fadeOut()):e.data("block").controls.hide();var o=e.data("options").onChange;f(o)&&t.isFunction(o)&&o.call(e)},saveClicked:function(){var e=t(this),o=e.data("root"),l=x.value.call(o);e.hasClass("cron-loading")||(e.addClass("cron-loading"),t.ajax({type:"POST",url:o.data("options").url_set,data:{cron:l},success:function(){o.data("current_value",l),e.removeClass("cron-loading"),l===x.value.call(o)&&(o.removeClass("cron-changed"),o.data("block").controls.fadeOut())},error:function(){alert(gettext("An error occurred when submitting your request. Try again?")),e.removeClass("cron-loading")}}))}};t.fn.cron=function(e){return x[e]?x[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on jQuery.cron"):x.init.apply(this,arguments)}}(jQuery_1_4_1);